<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Query a database."><title>Query a database. — db_query • sofa</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Query a database. — db_query"><meta property="og:description" content="Query a database."><meta property="og:image" content="https://docs.ropensci.org/sofa/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">sofa</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../articles/sofa.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/query_tutorial.html">CouchDB Queries</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/sofa/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Query a database.</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/sofa/blob/HEAD/R/db_query.R" class="external-link"><code>R/db_query.R</code></a></small>
      <div class="d-none name"><code>db_query.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Query a database.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">db_query</span><span class="op">(</span></span>
<span>  <span class="va">cushion</span>,</span>
<span>  <span class="va">dbname</span>,</span>
<span>  query <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  selector <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  limit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  skip <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fields <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use_index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  r <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bookmark <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  update <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stable <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stale <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  execution_stats <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  as <span class="op">=</span> <span class="st">"list"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>cushion</dt>
<dd><p>A <code><a href="Cushion.html">Cushion</a></code> object. Required.</p></dd>


<dt>dbname</dt>
<dd><p>Database name</p></dd>


<dt>query</dt>
<dd><p>(character) instead of using the other parameters, you can
compose one R list or json blob here</p></dd>


<dt>selector</dt>
<dd><p>(list/json) - JSON object describing criteria used to select
documents. More information provided in the section on selector syntax.
See the <code>query_tutorial</code> in this package, and the selectors docs
<a href="http://docs.couchdb.org/en/2.0.0/api/database/find.html#find-selectors" class="external-link">http://docs.couchdb.org/en/2.0.0/api/database/find.html#find-selectors</a></p></dd>


<dt>limit</dt>
<dd><p>(numeric) - Maximum number of results returned. Default is 25.
Optional</p></dd>


<dt>skip</dt>
<dd><p>(numeric) - Skip the first 'n' results, where 'n' is the value
specified. Optional</p></dd>


<dt>sort</dt>
<dd><p>(json) - JSON array following sort syntax. Optional.
See <a href="http://docs.couchdb.org/en/2.0.0/api/database/find.html#find-sort" class="external-link">http://docs.couchdb.org/en/2.0.0/api/database/find.html#find-sort</a>
For some reason, sort doesn't work often, not sure why.</p></dd>


<dt>fields</dt>
<dd><p>(json) - JSON array specifying which fields of each object
should be returned. If it is omitted, the entire object is returned. More
information provided in the section on filtering fields. Optional
See <a href="http://docs.couchdb.org/en/2.0.0/api/database/find.html#find-filter" class="external-link">http://docs.couchdb.org/en/2.0.0/api/database/find.html#find-filter</a></p></dd>


<dt>use_index</dt>
<dd><p>(json) - Instruct a query to use a specific index.
Specified either as <code>&lt;design_document&gt;</code> or <code>["&lt;design_document&gt;", "&lt;index_name&gt;"]</code>. Optional</p></dd>


<dt>r</dt>
<dd><p>(numeric) Read quorum needed for the result. This defaults to 1,
in which case the document found in the index is returned. If set to a
higher value, each document is read from at least that many replicas before
it is returned in the results. This is likely to take more time than using
only the document stored locally with the index. Optional, default: 1</p></dd>


<dt>bookmark</dt>
<dd><p>(character) A string that enables you to specify which
page of results you require. Used for paging through result sets. Every
query returns an opaque string under the bookmark key that can then be
passed back in a query to get the next page of results. If any part of
the selector query changes between requests, the results are undefined.
Optional, default: <code>NULL</code></p></dd>


<dt>update</dt>
<dd><p>(logical) Whether to update the index prior to returning the
result. Default is true. Optional</p></dd>


<dt>stable</dt>
<dd><p>(logical) Whether or not the view results should be returned
from a “stable” set of shards. Optional</p></dd>


<dt>stale</dt>
<dd><p>(character) Combination of <code>update=FALSE</code> and <code>stable=TRUE</code>
options. Possible options: "ok", "FALSE" (default). Optional</p></dd>


<dt>execution_stats</dt>
<dd><p>(logical) Include execution statistics in the query
response. Optional, default: <code>FALSE</code></p></dd>


<dt>as</dt>
<dd><p>(character) One of list (default) or json</p></dd>


<dt>...</dt>
<dd><p>Curl args passed on to <code><a href="https://docs.ropensci.org/crul/reference/HttpClient.html" class="external-link">HttpClient</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>JSON as a character string or a list (determined by the
<code>as</code> parameter)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## create a connection</span></span></span>
<span class="r-in"><span><span class="va">user</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"COUCHDB_TEST_USER"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pwd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"COUCHDB_TEST_PWD"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va"><a href="Cushion.html">Cushion</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>user<span class="op">=</span><span class="va">user</span>, pwd<span class="op">=</span><span class="va">pwd</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples/omdb.json"</span>, package <span class="op">=</span> <span class="st">"sofa"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">strs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## create a database</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="st">"omdb"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="db_list.html">db_list</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="db_delete.html">db_delete</a></span><span class="op">(</span><span class="va">x</span>, dbname<span class="op">=</span><span class="st">"omdb"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu"><a href="db_create.html">db_create</a></span><span class="op">(</span><span class="va">x</span>, dbname<span class="op">=</span><span class="st">'omdb'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## add some documents</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="fu"><a href="db_bulk_create.html">db_bulk_create</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"omdb"</span>, <span class="va">strs</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## query all in one json blob</span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>, query <span class="op">=</span> <span class="st">'{</span></span></span>
<span class="r-in"><span><span class="st">  "selector": {</span></span></span>
<span class="r-in"><span><span class="st">    "_id": {</span></span></span>
<span class="r-in"><span><span class="st">      "$gt": null</span></span></span>
<span class="r-in"><span><span class="st">    }</span></span></span>
<span class="r-in"><span><span class="st">  }</span></span></span>
<span class="r-in"><span><span class="st">}'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## query with each parameter</span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>,</span></span>
<span class="r-in"><span>  selector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`_id` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`$gt` <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>,</span></span>
<span class="r-in"><span>  selector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`_id` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`$gt` <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span>, limit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># fields</span></span></span>
<span class="r-in"><span><span class="co">## single field works</span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>,</span></span>
<span class="r-in"><span>  selector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`_id` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`$gt` <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span>, limit <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'_id'</span>, <span class="st">'Actors'</span>, <span class="st">'imdbRating'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## as well as many fields</span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>,</span></span>
<span class="r-in"><span>  selector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`_id` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`$gt` <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span>, limit <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  fields <span class="op">=</span> <span class="st">'_id'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## other queries</span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>,</span></span>
<span class="r-in"><span>  selector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`$gt` <span class="op">=</span> <span class="st">"2013"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>, selector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Rated <span class="op">=</span> <span class="st">"R"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>,</span></span>
<span class="r-in"><span>  selector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Rated <span class="op">=</span> <span class="st">"PG"</span>, Language <span class="op">=</span> <span class="st">"English"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>, selector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  `$or` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Director <span class="op">=</span> <span class="st">"Jon Favreau"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Director <span class="op">=</span> <span class="st">"Spike Lee"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"_id"</span>, <span class="st">"Director"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## when selector vars are of same name, use a JSON string</span></span></span>
<span class="r-in"><span><span class="co">## b/c R doesn't let you have a list with same name slots</span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>, query <span class="op">=</span> <span class="st">'{</span></span></span>
<span class="r-in"><span><span class="st">  "selector": {</span></span></span>
<span class="r-in"><span><span class="st">    "Year": {"$gte": "1990"},</span></span></span>
<span class="r-in"><span><span class="st">    "Year": {"$lte": "2000"},</span></span></span>
<span class="r-in"><span><span class="st">    "$not": {"Year": "1998"}</span></span></span>
<span class="r-in"><span><span class="st">  },</span></span></span>
<span class="r-in"><span><span class="st">  "fields": ["_id", "Year"]</span></span></span>
<span class="r-in"><span><span class="st">}'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## regex</span></span></span>
<span class="r-in"><span><span class="fu">db_query</span><span class="op">(</span><span class="va">x</span>, dbname <span class="op">=</span> <span class="st">"omdb"</span>, selector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  Director <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`$regex` <span class="op">=</span> <span class="st">"^R"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"_id"</span>, <span class="st">"Director"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

